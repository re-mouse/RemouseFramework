using System.Collections.Generic;using Remouse.Shared.Core;using Remouse.Shared.Serialization;namespace Remouse.Shared.Models.Messages{    public class TickWorldCommandsMessage : NetworkMessage    {        public HashSet<WorldCommand> Commands { get; private set; } = new HashSet<WorldCommand>();                private List<CommandContainer> _commandContainers = new List<CommandContainer>();                public TickWorldCommandsMessage(HashSet<WorldCommand> commands)        {            Commands = commands;            foreach (var command in Commands)            {                _commandContainers.Add(new CommandContainer(command));            }        }        public override void Serialize(INetworkWriter writer)        {            writer.WriteList(_commandContainers);        }        public override void Deserialize(INetworkReader reader)        {            reader.ReadList(ref _commandContainers);        }    }    public struct CommandContainer : INetworkSerializable    {        public ushort commandTypeId;        public WorldCommand command;        public CommandContainer(WorldCommand command)        {            commandTypeId = TypeSerializer<WorldCommand>.GetTypeId(command);            this.command = command;        }        public void Serialize(INetworkWriter writer)        {            writer.WriteUShort(commandTypeId);        }        public void Deserialize(INetworkReader reader)        {            commandTypeId = reader.ReadUShort();            command = TypeSerializer<WorldCommand>.GetNew(commandTypeId);        }    }}